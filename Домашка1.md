## Задача 1
https://hub.docker.com/repository/docker/dk054/custom-nginx/tags/1.0.0/sha256-73402190b0857ea96916f12d3caefd47f68b578ef32e7924a3696c88d11e84f7
## Задача 2
sudo docker run -d --name "Kalashnikov.D.A-custom-nginx-t2" -p 127.0.0.1:8080:80 custom-nginx:1.0.0
sudo docker rename Kalashnikov.D.A-custom-nginx-t2 custom-nginx-t2
<img width="1177" height="162" alt="Снимок экрана 2025-11-25 002938" src="https://github.com/user-attachments/assets/a08680cf-9e4a-4240-ae2d-57e4fa335cd3" />
<img width="1193" height="454" alt="Снимок экрана 2025-11-25 003042" src="https://github.com/user-attachments/assets/42ee479d-8ac1-4627-bf38-65343c685f0f" />
<img width="1173" height="436" alt="Снимок экрана 2025-11-25 003136" src="https://github.com/user-attachments/assets/0d675f31-2d42-40ab-b223-5aef3493198c" />


## Задача 3
sudo docker attach custom-nginx-t2
После Ctrl-C основной процесс PID 1 внутри контейнера получил сигнал SIGINT и завершился. В Docker контейнер считается живым пока запущен его основной процесс. Если этот процесс завершился, контейнер переходит в статус Exited. Поэтому при выполнении docker ps -a вы увидите контейнер со статусом Exited — это означает, что контейнер остановлен из‑за завершения его основного процесса (в данном случае — в результате Ctrl-C).
4. sudo docker start custom-nginx-t2
5.  docker exec -it custom-nginx-t2 /bin/bash
<img width="1167" height="498" alt="Снимок экрана 2025-11-25 004337" src="https://github.com/user-attachments/assets/77734e12-44dd-40e4-acae-770c01b4496c" />
6. apt-get update
   apt-get install -y vim
7. vi /etc/nginx/conf.d/default.conf
<img width="1213" height="706" alt="Снимок экрана 2025-11-25 004743" src="https://github.com/user-attachments/assets/6bd479ac-c020-4627-94c7-4aa52289a459" />
8. nginx -s reload
   а затем внутри контейнера ```curl http://127.0.0.1:80 ; curl http://127.0.0.1:81```.
   <img width="1212" height="755" alt="Снимок экрана 2025-11-25 005135" src="https://github.com/user-attachments/assets/c8deea71-4243-4d37-91de-d40ab315ceda" />

10. Проверьте вывод команд: ```ss -tlpn | grep 127.0.0.1:8080```
    ```docker port custom-nginx-t2```
    ```curl http://127.0.0.1:8080```.
    Кратко объясните суть возникшей проблемы.
    в конфиге nginx внутри контейнера listen 80 → listen 81, но проброс портов контейнера на хост (docker run -p HOST:CONTAINER) настроен так, чтобы ожидать nginx на порту 80 или на 8080 хоста.
    Если nginx слушает 81 внутри контейнера, а docker пробрасывает, например, host:8080 → container:80, то на хосте 8080 будет «мёртвый» порт (нет сервера), а внутри контейнера curl на 81 вернёт ответ.
    То есть несоответствие слушаемого порта внутри контейнера и смэппинга портов на хосте — причина недоступности сервиса на ожидаемом хост-порте.
11. *
sudo docker stop custom-nginx-t2
sudo docker run -p 8080:81 custom-nginx

sudo docker run -d --name custom-nginx-t2 -p 127.0.0.1:8080:81

sudo iptables -t nat -A PREROUTING -p tcp -d 127.0.0.1 --dport 8080 -j DNAT --to-destination 172.17.0.2:81
sudo iptables -t nat -A POSTROUTING -p tcp -d 172.17.0.2 --dport 81 -j MASQUERADE
sudo docker exec -it custom-nginx-t2 curl -I http://127.0.0.1:80

12. docker rm -f custom-nginx-t2

## Задача 4
1.
<img width="1251" height="757" alt="Снимок экрана 2025-11-25 102142" src="https://github.com/user-attachments/assets/50080ddf-9b68-480b-ab87-e980bcd5e324" />
sudo docker pull centos:7
sudo docker pull debian:latest
docker ps
docker run -d --name centos1 -v "$(pwd)":/data centos:7 sleep infinity
docker run -d --name debian1 -v "$(pwd)":/data debian:latest sleep infinity
docker exec -it centos1 bash -lc 'echo "Пример centos1" > /data/file_from_centos.txt'
echo "Файл с хоста" > "$(pwd)/file_from_host.txt"
docker exec -it debian1 bash -lc 'ls -la /data && echo "--- содержимое file_from_centos.txt ---" && cat /data/file_from_centos.txt && echo "--- содержимое file_from_host.txt ---" && cat /data/file_from_host.txt'

<img width="1217" height="950" alt="Снимок экрана 2025-11-25 102550" src="https://github.com/user-attachments/assets/e0b640e3-f6b4-47bc-8a42-698b03613929" />


## Задача 5
1. mkdir -p /tmp/netology/docker/task5
   vi /tmp/netology/docker/task5/compose.yaml
   vi /tmp/netology/docker/task5/docker-compose.yaml
   
- Docker Compose (команда docker compose) ищет файл с именем docker-compose.yml или docker-compose.yaml по умолчанию в текущей директории. Имя compose.yaml не входит в список стандартных имен.

<img width="1309" height="529" alt="Снимок экрана 2025-11-25 104555" src="https://github.com/user-attachments/assets/b8d8ded7-01fa-48b9-a990-fb49ca6f3b8b" />

2.
x-include:
- ./docker-compose.yaml
  docker-compose -f compose.yaml -f docker-compose.yaml up -d
3.
- создаю докерфайл для custom-nginx
  mkdir custom-nginx
  cat > custom-nginx/Dockerfile <<'EOF'
  FROM nginx:alpine
  RUN echo '<h1>Custom NGINX</h1>' > /usr/share/nginx/html/index.html
  EOF
- собираю образ с тегом custom-nginx:latest
  docker build -t custom-nginx:latest custom-nginx
- проверка что registry запущен
  curl -I http://localhost:5000/v2/ || true
- тег  образа для локального registry
  docker tag custom-nginx:latest localhost:5000/custom-nginx:latest
- пуш
  docker push localhost:5000/custom-nginx:latest
- проверка
  curl -s http://localhost:5000/v2/_catalog | jq .
  curl -s http://localhost:5000/v2/custom-nginx/tags/list | jq .

  <img width="1309" height="529" alt="Снимок экрана 2025-11-25 104555" src="https://github.com/user-attachments/assets/e5f9a9d1-ebe6-4370-b36a-6c770c166209" />


4.
<img width="1677" height="858" alt="Снимок экрана 2025-11-25 111939" src="https://github.com/user-attachments/assets/3516ab20-b4a1-4d21-ba03-8da82f2867ff" />

5.
<img width="1853" height="812" alt="Снимок экрана 2025-11-25 112735" src="https://github.com/user-attachments/assets/73ba2aeb-f2fb-45b1-95ef-191c151a2960" />

6.
<img width="1860" height="971" alt="Снимок экрана 2025-11-25 113004" src="https://github.com/user-attachments/assets/633b2d94-0465-4335-b8eb-feaaae4894a6" />

<img width="1835" height="970" alt="Снимок экрана 2025-11-25 113012" src="https://github.com/user-attachments/assets/c40ba181-c725-4df3-b4dc-96a1ba8fbab3" />

7.
docker-compose up -d --remove-orphans

<img width="1710" height="926" alt="Снимок экрана 2025-11-25 113211" src="https://github.com/user-attachments/assets/118ca632-bfbc-4524-8072-7818c403e952" />

docker-compose down --remove-orphans

<img width="1618" height="789" alt="Снимок экрана 2025-11-25 113554" src="https://github.com/user-attachments/assets/3e77c40f-5772-484c-8af5-cfe46592417d" />
